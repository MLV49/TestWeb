<html>
    <head>
        <link rel="stylesheet" href="stils.css">

        <title>LAUKUMS</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script>
            var firstTime = true;
            var vertibas3;
            var sakums=false;
            var pirmajamID, otrajamID;
            var vertibas;
            var n;
            var beigas;
            var t0,t1;
            var laiks;
            function myFunction(){
                t0=performance.now();
                document.getElementById("buttonDiv").innerHTML="";
                n = document.getElementById("log").value;
                var skait = 1;
                beigas=0;
                vertibas = ['Viens','1','Divi','2','Trīs','3','Četri','4','Pieci', '5','Seši','6','Septiņi','7','Astoņi','8','Deviņi','9','Desmit','10','Vienpadsmit','11','Divpadsmit','12','Trīspadsmit','13','Četrpadsmit','14','Piecpadsmit','15','Sešpadsmit','16','Septiņpadsmit','17','Deviņpadsmit','19', 'Astoņpadsmit', '18', 'Divdesmit', '20', 'Divdesmit viens', '21', 'Divdesmit divi', '22', 'Divdesmit trīs', '23', 'Divdesmit četri', '24', 'Divdesmit pieci', '25', 'Divdesmit seši', '26', 'Divdesmit septiņi', '27', 'Divdesmit astoņi', '28', 'Divdesmit deviņi', '29', 'Trīsdesmit', '30'];
                salidzin = ['1','Viens','2','Divi','3','Trīs','4','Četri','5','Pieci', '6','Seši','7','Septiņi','8','Astoņi','9','Deviņi','10','Desmit','11','Vienpadsmit','12','Divpadsmit','13','Trīspadsmit','14','Četrpadsmit','15','Piecpadsmit','16','Sešpadsmit','17','Septiņpadsmit','19','Deviņpadsmit', '18', 'Astoņpadsmit', '20', 'Divdesmit', '21', 'Divdesmit viens', '22', 'Divdesmit divi', '23', 'Divdesmit trīs', '24', 'Divdesmit četri', '25', 'Divdesmit pieci', '26', 'Divdesmit seši', '27', 'Divdesmit septiņi', '28', 'Divdesmit astoņi', '29', 'Divdesmit deviņi', '30', 'Trīsdesmit'];
                var vertibas3 = ['','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',''];
                for(var g=0;g<n*n;g++){
                    while(true){
                        var alreadyHas = false;
                        ran=getRandomInt(n*n);
                        for(var z=0;z<g;z++){
                            if(vertibas3[z]===ran){
                                alreadyHas=true;
                                break;
                            }
                        }
                        if(!alreadyHas){
                            vertibas3[g]=ran;
                            break;
                        }  
                    }
                }
                for(var i=0;i<n;i++){
                    for(var j=0;j<n;j++){
                        var button2 = document.createElement("button");
                        var text = document.createTextNode(vertibas[vertibas3[skait-1]]);
                        button2.classList.add("buttonStyle");
                        button2.appendChild(text);
                        button2.setAttribute('onclick',"poguFunction(this)");
                        button2.id=vertibas3[skait-1];
                        skait++;
                        document.getElementById("buttonDiv").appendChild(button2);
                    }
                    var blankLine = document.createElement("br");
                    document.getElementById("buttonDiv").appendChild(blankLine);
                }
            }
            function getRandomInt(max) {
                return Math.floor(Math.random() * Math.floor(max));
            }
            function poguFunction(x){
                if(n==3 || n<=1 || n==7 ){
                   alert("Ievadiet pāra skaitli no 2 līdz 8");
               }else if (n != 3)
                if(firstTime){
                    if(sakums){
                        document.getElementById(pirmajamID).className="buttonStyle";
                        document.getElementById(otrajamID).className="buttonStyle";
                    }
                    x.className="newButtonStyle";
                    firstTime=false;
                    pirmajamID = x.id;
                }
                else{
                    x.className="newButtonStyle";
                    otrajamID = x.id;
                    firstTime=true;
                    sakums=true;
                    if(vertibas[Number.parseInt(pirmajamID)]===salidzin[Number.parseInt(otrajamID)]){
                        sakums=false;
                        document.getElementById(pirmajamID).className="finalButtonStyle";
                        document.getElementById(otrajamID).className="finalButtonStyle";
                        beigas++;
                    }
                    if(beigas===n*n/2){
                        t1=performance.now();
                        laiks=((t1-t0)/1000).toFixed(1);
                        document.getElementById("buttonDiv").innerHTML="";
                        var text2 = document.createTextNode("Spēle pabeigta, laiks "+laiks +" sekundes!");
                        document.getElementById("buttonDiv").style.fontSize="40px";
                        document.getElementById("buttonDiv").appendChild(text2);
                        
                   }
                }
            }
        </script>
    </head>
    <body>
        <label for="log">n</label>
        <input type="number" step="2" min="2" max="8" id="log" name="log" value="">
        <button type="button" onclick="myFunction()">Spēlēt</button>
        <br/>
        <div id="buttonDiv" style="width: 1000px; height: 1000px">
            
        </div>
        
    </body>
</html>